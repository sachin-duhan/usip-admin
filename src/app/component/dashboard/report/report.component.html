<app-spinner *ngIf="loading"></app-spinner>
<div class="container" *ngIf="!loading">
    <h2 class="mat-h1">Intern Reports
        <sup id="chip" class="indigo white-text">{{internReport.length}}</sup>
    </h2>
    <!--display of the reports-->
    <mat-accordion *ngIf="internReport.length > 0;else elseTemplate">
        <mat-expansion-panel *ngFor="let item of internReport">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    {{item.intern.pInfo.name | titlecase}}
                </mat-panel-title>
                <mat-panel-description>
                    Reporting Officer <strong> - {{item.intern.repOfficer.name}} -
                        {{item.intern.repOfficer.deptt | uppercase}}</strong>
                </mat-panel-description>
            </mat-expansion-panel-header>
            <img src="{{item.reportImage}}" *ngIf="show_image" class="responsive-img">
            <div class="row" *ngIf="!show_image">
                <img src="{{item.reportImage}}" class="responsive-img" *ngIf="show_image" />
                <p class="col s12">{{item.description}}</p>
                <div class="col s12 m6">
                    <h6 class="grey-text text-darken-2">Report Period Details</h6>
                    <p><strong>Start Date</strong> : {{item.start | date:shortDate}}</p>
                    <p><strong>End Date</strong> : {{item.end | date:shortDate}}</p>
                    <p><strong>Submission Date</strong> - {{item.date | date:shortDate}}</p>
                </div>
                <div class="col s12 m6">
                    <h6 class="grey-text text-darken-2">Contact Details</h6>
                    <p><strong>Officer Phone Number</strong> - {{item.intern.repOfficer.phone}}</p>
                    <p><strong>Officer Email</strong> - {{item.intern.repOfficer.email}}</p>
                    <p><strong>Intern Phone Number</strong> - {{item.intern.pInfo.phone}}</p>
                    <p><strong>Intern Email</strong> - {{item.intern.pInfo.email}}</p>
                </div>
                <div class="col s12">
                    <h6 class="grey-text text-darken-2">Other Details</h6>
                    <p> <strong>Deployment Number</strong> - {{item.intern.depNo}}</p>
                    <p><strong>Intern Roll Number</strong> - {{item.intern.pInfo.rollNo}}</p>
                </div>
            </div>
            <div class="row"> <button mat-button class="right indigo white-text" (click)="show_image = !show_image">
                    {{show_image ? "Hide report image" : "View Report Image"}}</button></div>
        </mat-expansion-panel>
    </mat-accordion>

    <ng-template #elseTemplate>
        <div class="container white center pd-40">
            <h5> No Reports found</h5>
        </div>
    </ng-template>
</div>